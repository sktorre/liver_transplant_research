---
title: "Exploring the Data"
author: "Sarah Torrence"
date: "`r Sys.Date()`"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = T, warning = F, message = F, error = F)

# Box access
library(boxr)
box_auth()

library(tidyverse)
library(rms)
library(lubridate)
library(naniar)
library(janitor)

#read in data
data <- box_read_excel("911922698820")
```

```{r}
head(data)
```
# Data Cleaning

```{r}
#convert all '#NULL!' values to NA
data[apply(data, 2, function(x) x=='#NULL!')] = NA

#convert discharge date and date of death to date format
data$dischargedate <- as.Date(as.numeric(data$dischargedate), origin = "1899-12-30")
data$Dateofdeath <- as.Date(as.numeric(data$Dateofdeath), origin = "1899-12-30")
data$Retransplantation <- as.Date(as.numeric(data$Retransplantation), origin = "1899-12-30")
```

There is a patient with an admit and discharge date in 2012 but a transplant date in 2020 which is out of range of when the data was collected. We can assume this patient's transplant really happened in 2012.

```{r}
data %>% filter(PatientMRN == 32535122)
```
```{r}
data$DateofTransplant[data$PatientMRN == 32535122] = "2012-02-20 UTC"
```

```{r}
plot(describe(data))
```




```{r}
describe(data)
```


```{r}
data %>% filter(SMI00 == 0)
```

